<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link rel="shortcut icon" href="{{url_for('static' , filename = 'img/fav.svg')}}" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{url_for('static' , filename ='css/result.css' )}}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>{{query}} - Recherche PriceTracker</title>
</head>
<body>
     <header style="margin-top:30px; margin-bottom:10px; text-align:center;">
            <img src="{{url_for('static', filename='img/fav.svg')}}" alt="PriceTracker" style="width:72px; height:72px;">
        </header>
        <!-- <form method="get" style="width:100%; max-width:700px; margin-bottom:30px;">
            <div style="display: flex; align-items: center; background: white; border-radius: 30px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); padding: 8px 20px;">
                <i class="fas fa-search" style="color: #b0b0b0; font-size: 1.2em; margin-right: 10px;"></i>
                <input type="search" name="q" value="{{ query }}" placeholder="Rechercher un produit..." style="border:none; outline:none; font-size:1.3em; flex:1; background:transparent; padding:10px;">
                <button class="btn btn-primary" type="submit" style="border-radius: 5px; padding: 8px 20px; font-size:1em; background:#4361ee; border:none; margin-left:10px;">Recherche</button>
            </div>
        </form> -->
         <form method="get" style="width:100%; max-width:600px; position:relative; margin-left:30%;" class="search-bar"  >
            <div style="display: flex; align-items: center; background: white; border-radius: 30px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); padding: 8px 20px;">
                <i class="fas fa-search" style="color: #b0b0b0; font-size: 1.2em; margin-right: 10px;"></i>
                <input type="search" name="q" value="{{ query }}" placeholder="Rechercher un produit..." style="border:none; outline:none; font-size:1.3em; flex:1; background:transparent; padding:10px;">
                <button type="button" id="dropdownToggle" style="background:none; border:none; margin-left:10px; cursor:pointer;">
                    <i class="fas fa-sliders-h" style="font-size:1.3em; color:#4361ee;"></i>
                </button>
            </div>
            <div id="advancedDropdown" style="display:none; position:absolute; left:0; right:0; top:60px; background:white; box-shadow:0 2px 8px rgba(0,0,0,0.08); border-radius:20px; padding:20px; z-index:10;">
                <div class="form-group" style="margin-bottom:15px;">
                    <label for="search-type" id="label">Type de recherche <i class="fa-solid fa-bolt"></i> / <i class="fa-solid fa-clock"></i></label>
                    <select id="search-type" name="search-type" style="width:100%;">
                        <option value="fast">Rapide</option>
                        <option value="deep">Approfondie</option>
                    </select>
                </div>
                <div class="form-group" style="margin-bottom:15px;">
                    <label for="min-price" id="label">Prix min (FCFA)</label>
                    <input type="number" placeholder="100" min="100" name="min-price" value="100" id="input" style="width:100%;">
                </div>
                <div class="form-group" style="margin-bottom:15px;">
                    <label for="max-price" id="label">Prix max (FCFA)</label>
                    <input type="number" placeholder="100000" min="100" name="max-price" value="10000000" id="input" style="width:100%;">
                </div>
            </div>
             <div style="display: flex; justify-content: center; gap: 12px; margin-top: 30px;">
                <button type="submit" style="display:none;"></button>
            </div>
        </form>

              <section style="margin-top:200px ;"> 
                <div class="results-header">
                    <h2 class="section-title">
                        <i class="fas fa-list"></i>
                        Resultats 
                    </h2>
                    
                    <div class="stats">
                        <div class="stat-card">
                            <div class="stat-number">{{name_count}}</div>
                            <div class="stat-label">Produits</div>
                            
                        </div>
                       
                  


                    </div>
                    <div class="filters">
                        
                        <button class="btn-filter active">Tous</button>
                        <button class="btn-filter">Alertes</button>
                        <button class="btn-filter">Nouveaux</button>
                        
                    </div>
                </div>

                <div class="products-grid">
                    <!-- CARTE PRODUIT 1 -->
 {%for item in inventaire%}
                    <div class="product-card">
                        <div class="info-grid">
                            <div class="info-item">
                                <img src="{{item.img}}" alt="">
                            </div>
                        </div>
                        <div class="product-header">
                            <div>
                                <h3 class="product-title">{{item.name}}</h3>
                                <span class="product-site">{{item.origin}}</span>
                                {%if item.origin == 'ci.CoinAfrique.com'%}
                                    <i class="fa-solid fa-triangle-exclamation"></i>
                                {%endif%}
                            </div>
                        </div>
                        
                        <div class="product-price">
                           {{item.price}} FCFA
                        </div>
                        
                        
                        <!-- <p class="product-info">iPhone en excellent état, batterie 95%, avec facture et accessoires.</p>
                        
                        <div class="info-grid">
                            <div class="info-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>Paris 75</span>
                            </div>
                            <div class="info-item">
                                <i class="fas fa-star"></i>
                                <span>État: Excellent</span>
                            </div>
                            <div class="info-item">
                                <i class="fas fa-clock"></i>
                                <span>Il y a 2h</span>
                            </div>
                            <div class="info-item">
                                <i class="fas fa-sync-alt"></i>
                                <span>Vérifié aujourd'hui</span>
                            </div>
                        </div> 
                        -->
                       
                        <div class="product-actions">
                            <a class="btn-secondary" href="{{item.link}}" style="text-decoration: none;" >Voir l'annonce</a>
                           
                        </div>
                    </div>
{%endfor%}

                </div>
            </section>
      
 <script>
    document.getElementById('dropdownToggle').onclick = function() {
        var dropdown = document.getElementById('advancedDropdown');
        dropdown.style.display = dropdown.style.display === 'none' ? 'block' : 'none';
    };
    document.addEventListener('click', function(e) {
        var toggle = document.getElementById('dropdownToggle');
        var dropdown = document.getElementById('advancedDropdown');
        if (!toggle.contains(e.target) && !dropdown.contains(e.target)) {
            dropdown.style.display = 'none';
        }
    });
    </script>
</body>
</html>